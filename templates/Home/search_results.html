{% extends 'base.html' %}
{% load static %}
{% block title %}
Search Result
{% endblock %}
{% block content %}
  <h1>Search Results: <span style="color: aquamarine;">"{{ keyword }}"</span></h1>
  <hr>
  {% if post_results %}
    <div class="container">
      <div class="row g-0">
        <h2>Blog Post Results</h2>
        <div class="card-body"></div>
        {% for post in post_results %}
          <div class="col-sm-8 bg-light mb-3" style="height: 200px;">
            <div class="card-body">
              <h3 class="card-title">{{ post.title }}</h3>
              <div class="mb-2 text-muted">{{ post.creation_datetime|date:'F d, Y' }} by {{ post.author }}</div>
              <p class="card-text">{{ post.content|truncatechars:100 }}</p>
              <a href="{% url 'Home:post_detail' post.id %}" class="icon-link gap-1 icon-link-hover">
                Continue reading
              </a>
            </div>
          </div>
          <div class="col-sm bg-light" >
            {% if post.image %}
            <img src="{% get_media_prefix %}{{post.image}}" alt="" class="card-img-top" style="height: 200px;object-fit:cover;">
            {% else %}
            <img src="{% static 'images/blogpost_placeholder.png' %}" alt="" class="card-img-top" style="height: 200px;object-fit:cover;">
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <p>No blog post results found.</p>
  {% endif %}
  {% if blogger_results %}
    <div class="container">
      <div class="row g-0">
        <h2>Bloggers Results</h2>
        <div class="card-body"></div>
        {% for user in blogger_results %}
          <div class="col-sm-8 bg-light mb-3" style="height: 300px;">
            <div class="card-body">
              <h3 class="card-title">{{ user.blogger.blog_title }}</h3>
              <div class="mb-2">About Blogger:</div>
              <div class="mb-0">{{ user.blogger.blog_description|truncatechars:100 }}</div>
              <div class="mb-2">Followers: {{ user.blogger.follower.count }}</div>
              <div class="mb-2">Following: {{ user.blogger.following_users.count }}</div>
              <div class="mb-2">Posts: {{ user.blogger.user.post_set.count }}</div>
              {% if request.user.id == user.id %}
                        <a href="{% url 'Personal:view' %}">Read More</a>
                        {% else %}
                        <a href="{% url 'Personal:viewOther' user.id %}">Read More</a>
                        {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <p>No blogger results found.</p>
  {% endif %}
{% endblock %}